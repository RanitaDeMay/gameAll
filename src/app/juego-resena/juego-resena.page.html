<ion-content color="dark">
  <header class="header">
    <div class="header-menu">
      <ion-title>
        GameAll
      </ion-title>
      <ion-list lines="none">
        <ion-item (mouseover)="changeColorOnMouseOver($event)" (mouseout)="restoreColorOnMouseOut($event)" (click)="navigateTo('/home')">
            <ion-label>Inicio</ion-label>
        </ion-item>
        <ion-item  (mouseover)="changeColorOnMouseOver($event)" (mouseout)="restoreColorOnMouseOut($event)"(click)="navigateTo('/explorar')">
          <ion-label>Explorar</ion-label>
        </ion-item>
        <ion-item (mouseover)="changeColorOnMouseOver($event)" (mouseout)="restoreColorOnMouseOut($event)" *ngIf="!sesionEncendida" (click)="navigateTo('/login')">
          <ion-label>Iniciar Sesión</ion-label>
        </ion-item>
        <ion-item (mouseover)="changeColorOnMouseOver($event)" (mouseout)="restoreColorOnMouseOut($event)" *ngIf="admin" (click)="navigateTo('/solicitudes')">
          <ion-label>Solicitudes de juegos</ion-label>
        </ion-item>
        <ion-item *ngIf="sesionEncendida" (mouseover)="changeColorOnMouseOver($event)" (mouseout)="restoreColorOnMouseOut($event)" (click)="ocultarMostrar()">
          <ion-icon name="person" class="sesion"></ion-icon>
        </ion-item>
      </ion-list>
    </div>
  </header>

  <div class="sesion-informacion" *ngIf="mostrarDiv">
    <h6>{{email}}</h6>
    <h6>{{nickname}}</h6>
    <p  *ngIf="admin">administrador</p>
    <ion-icon name="log-out-outline" (click)="ocultarMostrar()"></ion-icon>
  </div>
  <div *ngIf="(juego$ | async) as juego" class="contenedor-global">
    <div class="seccion-informacion">
      <div class="contenedor-imagen" 
      [style.backgroundImage]="'url('+juego.imagen+')'"></div>
      <div class="contenedor-informacion">
        <h1>{{ juego.nombreJuego }}</h1>
        <h3>{{ juego.autor }}</h3>
        <h4>{{ juego.genero }}</h4>
        <p>{{ juego.sinopsis }}</p>
        <h5>{{ formatearLanzamiento(juego.lanzamiento) }}</h5>
      </div>
    </div>
    
    <div class="seccion-resenas">
      <div class = 'top-side'>
        <h1>Reseñas de {{juego.nombreJuego}}</h1>
        <a id="miEnlace" *ngIf="sesionEncendida" (click)="ocultarFormularioResenas()">
          <ion-icon name="add-circle-outline"></ion-icon>
        </a>
      </div>
      <hr>
      <div class="resena" *ngFor="let resena of resenas$ | async">
        <h2>{{ resena.tituloResena }}</h2>
        <h3> by: {{ resena.autor }}</h3>
        <p>{{ resena.contenido }}</p>
        <h4>{{ formatearFecha(resena.fecha) }}</h4>
        <button *ngIf="sesionEncendida" (click)="aumentarVotos(resena.id)"><ion-icon name="heart"></ion-icon></button>
        <button *ngIf="admin" (click)="borrarResena(resena.id)"><ion-icon name="trash"></ion-icon></button> 
      </div>
      <form [formGroup]="resenaForm" (ngSubmit)="saveResena()">
        <div class="formulario-resena" *ngIf="mostrarFormularioResenas">
          <h4> autor </h4>
          <input type="text" class="i1" placeholder="Título de la reseña..." formControlName="tituloResena">
          <div class="rating-container">
            <ion-icon name="game-controller" [class.active]="rating >= 1" (click)="setRating(1)"></ion-icon>
            <ion-icon name="game-controller" [class.active]="rating >= 2" (click)="setRating(2)"></ion-icon>
            <ion-icon name="game-controller" [class.active]="rating >= 3" (click)="setRating(3)"></ion-icon>
            <ion-icon name="game-controller" [class.active]="rating >= 4" (click)="setRating(4)"></ion-icon>
            <ion-icon name="game-controller" [class.active]="rating >= 5" (click)="setRating(5)"></ion-icon>
          </div>
          <input class="i2" placeholder="Escribe tu reseña..." formControlName="contenido">
          <button type="submit">Subir reseña</button>
        </div>
      </form>
    </div>
  </div>
  <!-- BLOQUE DE FOOTER -->
<ion-footer>
  <ion-row class="ion-align-items-center">
    <ion-col size="2" class="ion-text-center">
      <ion-label class="ion-text-center"><h1>GameAll</h1></ion-label>
    </ion-col>
    <ion-col size="4" class="faqs">
      <ion-label (click)="navigateTo('/explorar')">¿Quién puede leer mi reseña?</ion-label>
      <ion-label (click)="navigateTo('/explorar')">Quiero hacer una reseña de un juego que no se encuentra en la página</ion-label>
    </ion-col>
    <ion-col size="3" class="faqs">
      <ion-label (click)="navigateTo('/explorar')">Escribir reseña</ion-label>
      <ion-label (click)="navigateTo('/explorar')">Reseñas recientes</ion-label>
      <ion-label (click)="navigateTo('/login')">Iniciar sesión</ion-label>
    </ion-col>
    <ion-col size="1">
      <ion-icon name="logo-twitter"></ion-icon>
    </ion-col>
    <ion-col size="1">
      <ion-icon name="logo-facebook"></ion-icon>
    </ion-col>
  </ion-row>
  <h3>TODOS LOS DERECHOS RESERVADOS</h3>
</ion-footer>
</ion-content>